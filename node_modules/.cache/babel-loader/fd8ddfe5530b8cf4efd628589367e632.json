{"ast":null,"code":"import _regeneratorRuntime from\"G:\\\\MERN\\\\e-com\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"G:\\\\MERN\\\\e-com\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"G:\\\\MERN\\\\e-com\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Products,Navbar,Checkout}from\"./components\";import Cart from'./components/Cart/Cart';import{commerce}from'./lib/commerce';import{BrowserRouter as Router,Switch,Route}from'react-router-dom';const App=()=>{const _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];const _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),cart=_useState4[0],setCart=_useState4[1];const _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),order=_useState6[0],setOrder=_useState6[1];const _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),errorMsg=_useState8[0],seterrorMsg=_useState8[1];const getProducts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$commerce$produ,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return commerce.products.list();case 2:_yield$commerce$produ=_context.sent;data=_yield$commerce$produ.data;//console.log(data)\nsetProducts(data);case 5:case\"end\":return _context.stop();}},_callee);}));return function getProducts(){return _ref.apply(this,arguments);};}();const getCart=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.t0=setCart;_context2.next=3;return commerce.cart.retrieve();case 3:_context2.t1=_context2.sent;(0,_context2.t0)(_context2.t1);case 5:case\"end\":return _context2.stop();}},_callee2);}));return function getCart(){return _ref2.apply(this,arguments);};}();const handleUpdate=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(productId,quantity){var _yield$commerce$cart$,cart;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:console.log(\"here\");_context3.next=3;return commerce.cart.update(productId,{quantity});case 3:_yield$commerce$cart$=_context3.sent;cart=_yield$commerce$cart$.cart;setCart(cart);case 6:case\"end\":return _context3.stop();}},_callee3);}));return function handleUpdate(_x,_x2){return _ref3.apply(this,arguments);};}();const handleRemove=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(productId){var _yield$commerce$cart$2,cart;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return commerce.cart.remove(productId);case 2:_yield$commerce$cart$2=_context4.sent;cart=_yield$commerce$cart$2.cart;setCart(cart);case 5:case\"end\":return _context4.stop();}},_callee4);}));return function handleRemove(_x3){return _ref4.apply(this,arguments);};}();const handleEmptyCart=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var _yield$commerce$cart$3,cart;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.next=2;return commerce.cart.empty();case 2:_yield$commerce$cart$3=_context5.sent;cart=_yield$commerce$cart$3.cart;setCart(cart);case 5:case\"end\":return _context5.stop();}},_callee5);}));return function handleEmptyCart(){return _ref5.apply(this,arguments);};}();const refreshCart=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var newCart;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:console.log(\"calling refresh\");_context6.next=3;return commerce.cart.refresh();case 3:newCart=_context6.sent;setCart(newCart);case 5:case\"end\":return _context6.stop();}},_callee6);}));return function refreshCart(){return _ref6.apply(this,arguments);};}();const handleCaptureCheckout=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(checkoutTokenId,newOrder){var incomingOrder;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:_context7.prev=0;_context7.next=3;return commerce.checkout.capture(checkoutTokenId,newOrder);case 3:incomingOrder=_context7.sent;setOrder(incomingOrder);refreshCart();_context7.next=12;break;case 8:_context7.prev=8;_context7.t0=_context7[\"catch\"](0);console.log(\"error here lol\");seterrorMsg(_context7.t0.data.error.message);case 12:case\"end\":return _context7.stop();}},_callee7,null,[[0,8]]);}));return function handleCaptureCheckout(_x4,_x5){return _ref7.apply(this,arguments);};}();useEffect(()=>{getProducts();getCart();},[]);const handleAddToCart=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(productId,qty){var item;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1)switch(_context8.prev=_context8.next){case 0:_context8.next=2;return commerce.cart.add(productId,qty);case 2:item=_context8.sent;setCart(item.cart);console.log(item);case 5:case\"end\":return _context8.stop();}},_callee8);}));return function handleAddToCart(_x6,_x7){return _ref8.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Navbar,{totalItems:cart.total_items}),/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\"},/*#__PURE__*/React.createElement(Products,{products:products,onAddTocart:handleAddToCart})),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/cart\"},/*#__PURE__*/React.createElement(Cart,{cart:cart,handleUpdate:handleUpdate,handleRemove:handleRemove,handleEmptyCart:handleEmptyCart})),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/checkout\"},/*#__PURE__*/React.createElement(Checkout,{order:order,error:errorMsg,onCaptureCheckout:handleCaptureCheckout,cart:cart})))));};export default App;","map":{"version":3,"sources":["G:/MERN/e-com/src/App.jsx"],"names":["React","useEffect","useState","Products","Navbar","Checkout","Cart","commerce","BrowserRouter","Router","Switch","Route","App","products","setProducts","cart","setCart","order","setOrder","errorMsg","seterrorMsg","getProducts","list","data","getCart","retrieve","handleUpdate","productId","quantity","console","log","update","handleRemove","remove","handleEmptyCart","empty","refreshCart","refresh","newCart","handleCaptureCheckout","checkoutTokenId","newOrder","checkout","capture","incomingOrder","error","message","handleAddToCart","qty","add","item","total_items"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport {Products ,Navbar,Checkout} from \"./components\"\r\nimport Cart from './components/Cart/Cart';\r\nimport {commerce} from './lib/commerce'\r\n\r\nimport {BrowserRouter as Router, Switch ,Route} from 'react-router-dom'\r\n\r\n\r\nconst App=()=>{\r\n    \r\nconst [products,setProducts]=useState([]);\r\nconst[cart,setCart]=useState({})\r\nconst[order,setOrder]=useState({})\r\nconst[errorMsg,seterrorMsg]=useState('')\r\nconst getProducts=async()=> {\r\n    const {data}=await commerce.products.list();\r\n    //console.log(data)\r\n    setProducts(data);\r\n\r\n    \r\n}\r\nconst getCart=async()=>{\r\n    setCart(await commerce.cart.retrieve())\r\n    \r\n}\r\nconst handleUpdate=async(productId,quantity)=>\r\n{\r\n    console.log(\"here\")\r\n        const {cart}=await commerce.cart.update(productId,{quantity})\r\n        setCart(cart);\r\n}\r\n\r\nconst handleRemove=async(productId)=>{\r\n    const {cart}=await commerce .cart.remove(productId);\r\n    setCart(cart);\r\n}\r\n\r\nconst handleEmptyCart=async()=>{\r\n    const {cart}=await commerce.cart.empty();\r\n    setCart(cart);\r\n}\r\n \r\n\r\nconst refreshCart=async()=>{\r\n    console.log(\"calling refresh\")\r\nconst newCart=await commerce.cart.refresh();\r\nsetCart(newCart)\r\n}\r\nconst handleCaptureCheckout = async (checkoutTokenId, newOrder) => {\r\n    try {\r\n      const incomingOrder = await commerce.checkout.capture(checkoutTokenId, newOrder);\r\n\r\n      setOrder(incomingOrder);\r\n\r\n      refreshCart();\r\n    } catch (error) {\r\n        console.log(\"error here lol\")\r\n      seterrorMsg(error.data.error.message);\r\n    }\r\n  };\r\n\r\n    \r\n\r\n\r\nuseEffect(()=>{\r\n    getProducts();\r\n    getCart()\r\n},[])\r\n\r\n   \r\n\r\nconst handleAddToCart=async(productId, qty)=>\r\n{\r\n    const item=await commerce.cart.add(productId,qty);\r\n    setCart(item.cart)\r\n    console.log(item)\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n    return (\r\n        <Router>\r\n        <div>\r\n            <Navbar totalItems={cart.total_items}/>\r\n            <Switch>\r\n                <Route exact path='/'>\r\n                    <Products products={products} onAddTocart={handleAddToCart}/>\r\n                </Route>\r\n                <Route exact path='/cart'>\r\n                <Cart cart={cart}\r\n                handleUpdate={handleUpdate}\r\n                handleRemove={handleRemove}\r\n                handleEmptyCart={handleEmptyCart}             \r\n                    \r\n                />\r\n                </Route>\r\n                <Route exact path='/checkout'>\r\n                <Checkout\r\n                order={order}\r\n                error={errorMsg}\r\n                onCaptureCheckout={handleCaptureCheckout}\r\n                 cart={cart}/>\r\n\r\n                </Route>\r\n            </Switch>\r\n           \r\n         \r\n        </div>\r\n\r\n        </Router>\r\n        \r\n    )\r\n}\r\nexport default App\r\n\r\n"]},"metadata":{},"sourceType":"module"}