{"ast":null,"code":"import _regeneratorRuntime from \"G:\\\\MERN\\\\keeper\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"G:\\\\MERN\\\\keeper\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"G:\\\\MERN\\\\keeper\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"G:\\\\MERN\\\\keeper\\\\src\\\\components\\\\CheckoutForm\\\\Checkout\\\\Checkout.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { Paper, Step, StepLabel, Typography, CircularProgress, Divider, Button, Stepper, CssBaseline } from \"@material-ui/core\";\nimport useStyles from \"./styles\";\nimport AddressForm from \"../AddressForm\";\nimport PaymentForm from \"../PaymentForm\";\nimport { commerce } from \"../../../lib/commerce\";\nimport { Link, useHistory } from \"react-router-dom\";\n\nconst Checkout = ({\n  cart,\n  order,\n  error,\n  onCaptureCheckout\n}) => {\n  const classes = useStyles();\n\n  const _useState = useState(0),\n        _useState2 = _slicedToArray(_useState, 2),\n        activeStep = _useState2[0],\n        setActiveStep = _useState2[1];\n\n  const steps = [' Shipping Address ', 'Payment'];\n  const history = useHistory();\n\n  const _useState3 = useState(null),\n        _useState4 = _slicedToArray(_useState3, 2),\n        checkoutToken = _useState4[0],\n        setcheckoutToken = _useState4[1];\n\n  const _useState5 = useState({}),\n        _useState6 = _slicedToArray(_useState5, 2),\n        shippingData = _useState6[0],\n        setshippingData = _useState6[1];\n\n  const _useState7 = useState(false),\n        _useState8 = _slicedToArray(_useState7, 2),\n        finished = _useState8[0],\n        setFinished = _useState8[1];\n\n  useEffect(() => {\n    const generateToken = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var token;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return commerce.checkout.generateToken(cart.id, {\n                type: 'cart'\n              });\n\n            case 3:\n              token = _context.sent;\n              setcheckoutToken(token);\n              console.log(token);\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n              history.push('/');\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 8]]);\n      }));\n\n      return function generateToken() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    generateToken();\n  }, [cart]);\n\n  const timeout = () => {\n    setTimeout(() => {\n      setFinished(true);\n    }, 2000);\n  };\n\n  let Confirmation = () => order.customer ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, \"console.log(\\\"here\\\")\", /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 14\n    }\n  }, \"Thank You for you purchase, \", order.customer.firstname, \" \", order.customer.lastname), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 14\n    }\n  }), /*#__PURE__*/React.createElement(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 14\n    }\n  }, \"order ref :\", order.customer_reference)), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    component: Link,\n    to: \"/\",\n    variant: \"outlined\",\n    type: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }, \"Back to home\")) : /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.spinner,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CircularProgress, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }\n  }));\n\n  if (error) {\n    Confirmation = () => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Typography, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }\n    }, \"Error:\", error), /*#__PURE__*/React.createElement(Button, {\n      component: Link,\n      to: \"/\",\n      variant: \"outlined\",\n      type: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }\n    }, \"Back to home\"));\n  }\n\n  const nextStep = () => {\n    setActiveStep(prevStep => prevStep + 1);\n  };\n\n  const backStep = () => {\n    setActiveStep(prevStep => prevStep - 1);\n  };\n\n  const next = data => {\n    setshippingData(data);\n    nextStep();\n  };\n\n  const Form = () => activeStep === 0 ? /*#__PURE__*/React.createElement(AddressForm, {\n    checkoutToken: checkoutToken,\n    next: next,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 24\n    }\n  }) : /*#__PURE__*/React.createElement(PaymentForm, {\n    nextStep: nextStep,\n    backStep: backStep,\n    onCaptureCheckout: onCaptureCheckout,\n    checkoutToken: checkoutToken,\n    shippingData: shippingData,\n    timeout: timeout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 82\n    }\n  });\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(CssBaseline, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.toolbar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"main\", {\n    className: classes.layout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, \" Checkout\"), /*#__PURE__*/React.createElement(Stepper, {\n    activeStep: activeStep,\n    className: classes.stepper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }, steps.map(step => /*#__PURE__*/React.createElement(Step, {\n    key: step,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(StepLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 21\n    }\n  }, step)))), activeStep === steps.length ? /*#__PURE__*/React.createElement(Confirmation, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 41\n    }\n  }) : checkoutToken && /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 73\n    }\n  }))));\n};\n\nexport default Checkout;","map":{"version":3,"sources":["G:/MERN/keeper/src/components/CheckoutForm/Checkout/Checkout.jsx"],"names":["React","useState","useEffect","Paper","Step","StepLabel","Typography","CircularProgress","Divider","Button","Stepper","CssBaseline","useStyles","AddressForm","PaymentForm","commerce","Link","useHistory","Checkout","cart","order","error","onCaptureCheckout","classes","activeStep","setActiveStep","steps","history","checkoutToken","setcheckoutToken","shippingData","setshippingData","finished","setFinished","generateToken","checkout","id","type","token","console","log","push","timeout","setTimeout","Confirmation","customer","firstname","lastname","customer_reference","spinner","nextStep","prevStep","backStep","next","data","Form","toolbar","layout","stepper","map","step","length"],"mappings":"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","sourcesContent":["import React ,{useState,useEffect} from \"react\"\r\nimport {Paper, Step,StepLabel,Typography,CircularProgress, Divider ,Button ,Stepper,CssBaseline} from \"@material-ui/core\"\r\nimport useStyles from \"./styles\"\r\nimport AddressForm from \"../AddressForm\"\r\nimport PaymentForm from \"../PaymentForm\"\r\nimport {commerce } from \"../../../lib/commerce\"\r\nimport {Link, useHistory} from \"react-router-dom\"\r\n\r\nconst Checkout=({cart, order, error, onCaptureCheckout})=>{\r\n    const classes=useStyles();\r\n    const [activeStep,setActiveStep]=useState(0)\r\n    const steps=[' Shipping Address ','Payment']\r\n    const history=useHistory()\r\n    const [checkoutToken,setcheckoutToken]=useState(null)\r\n    const [shippingData, setshippingData]=useState({})\r\n    const[finished, setFinished]=useState(false)\r\n\r\n\r\nuseEffect(()=>{\r\n    \r\n    const generateToken=async()=>{\r\n        try {\r\n            const token=await commerce.checkout.generateToken(cart.id,{type:'cart'})\r\n            setcheckoutToken(token)\r\n            console.log(token)\r\n\r\n            \r\n        } catch (error) {\r\n            history.push('/')            \r\n        }\r\n\r\n    }\r\n\r\n    generateToken();\r\n},[cart])\r\n\r\n\r\nconst timeout=()=>{\r\n    setTimeout(()=>{\r\n        setFinished(true)\r\n\r\n    },2000)\r\n}\r\n    let Confirmation=()=> \r\n        \r\n        \r\n        order.customer?\r\n        \r\n            (\r\n                \r\n            <>\r\n            <div>\r\n            console.log(\"here\")\r\n             <Typography variant=\"h5\">Thank You for you purchase, {order.customer.firstname} {order.customer.lastname}</Typography>  \r\n             <Divider/>\r\n             <Typography>order ref :{order.customer_reference}</Typography>\r\n            </div>\r\n            <br/>\r\n            <Button component={Link} to=\"/\" variant=\"outlined\" type=\"button\">Back to home</Button>\r\n\r\n            \r\n            </>\r\n        ):\r\n         (\r\n            <div className={classes.spinner}>\r\n            <CircularProgress/>\r\n            </div>\r\n        )\r\n        \r\n\r\n        if(error)\r\n        {\r\n            Confirmation=()=>(\r\n            <>\r\n            <Typography>Error:{error}</Typography>\r\n            <Button component={Link} to=\"/\" variant=\"outlined\" type=\"button\">Back to home</Button>\r\n\r\n            </>\r\n            )\r\n        }\r\n    \r\n\r\n    const nextStep=()=>{\r\n        setActiveStep((prevStep)=>prevStep+1)\r\n    }\r\n\r\n    const backStep=()=>{\r\n        setActiveStep((prevStep)=>prevStep-1)\r\n    }\r\n\r\n    const next=(data)=>{\r\n        setshippingData(data);\r\n        nextStep()\r\n\r\n    }\r\n\r\n    const Form=()=>(\r\n        activeStep===0?<AddressForm checkoutToken={checkoutToken}  next={next}/>:<PaymentForm \r\n        nextStep={nextStep}\r\n        backStep={backStep}\r\n         onCaptureCheckout={onCaptureCheckout} checkoutToken={checkoutToken}\r\n         shippingData={shippingData}\r\n         timeout={timeout}\r\n         />\r\n    )\r\n    return(\r\n        <>\r\n        <CssBaseline/>\r\n        <div className={classes.toolbar}/>\r\n        <main className={classes.layout}>\r\n        <Paper>\r\n            <Typography variant=\"h4\"> Checkout</Typography>\r\n            <Stepper activeStep={activeStep} className={classes.stepper}>\r\n            {steps.map((step)=>(\r\n                <Step key={step}>\r\n                    <StepLabel>{step}</StepLabel>\r\n                </Step>\r\n\r\n            ))}\r\n\r\n            </Stepper>\r\n            {activeStep===steps.length ?<Confirmation/>:checkoutToken&& <Form/>}\r\n        </Paper>\r\n\r\n      </main>\r\n        \r\n        </>\r\n    )\r\n\r\n}\r\nexport default Checkout"]},"metadata":{},"sourceType":"module"}